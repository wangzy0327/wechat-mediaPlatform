<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>后台管理系统</title>

    <!-- Bootstrap Core CSS -->
    <link href="http://cdn.bootcss.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">

    <!-- MetisMenu CSS -->
    <link href="/wechat-tools/js/metisMenu/metisMenu.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="/wechat-tools/css/sb-admin-2.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="/wechat-tools/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <link rel="stylesheet" href="/wechat-tools/js/datatables/media/css/dataTables.bootstrap.min.css">
    <link rel="stylesheet" href="/wechat-tools/css/jquery.tagsinput.min.css">
    <link rel="stylesheet" href="/wechat-tools/css/bootstrap-dialog.min.css">
    <link href="/wechat-tools/css/bootstrapValidator.min.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>

<div id="wrapper">

    <div id="top"></div>
    <!-- Page Content -->
    <div id="page-wrapper">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-12">
                    <h4 class="page-header">图文管理</h4>

                    <div class="panel panel-default">
                        <div class="panel-heading">
                            图文消息列表
                            <a href="javascript:;" id="addNewWxItem" class="btn btn-success btn-xs pull-right"><i class="fa fa-plus"></i> 新增</a>
                        </div>
                        <div class="panel-body">
                            <table class="table" id="wxItemTable">
                                <thead>
                                <tr>
                                    <!--<th>ID标识</th>-->
                                    <th>标题</th>
                                    <th width="35%">描述</th>
                                    <th width="8%" >分类</th>
                                    <th width="12%">创建时间</th>
                                    <th width="12%">最近修改时间</th>
                                    <th width="10%">操作</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td ></td>
                                    <td></td>
                                    <td style="margin: 0 auto"></td>
                                    <td style="margin: 0 auto"></td>
                                    <td style="margin: 0 auto"></td>
                                    <td style="margin: 0 auto"></td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>


                </div>
                <!-- /.col-lg-12 -->
            </div>
            <!-- /.row -->
        </div>
        <!-- /.container-fluid -->
    </div>
    <!-- /#page-wrapper -->

</div>
<!-- /#wrapper -->


<div class="modal fade" id="newWxItemModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">添加图文消息</h4>
            </div>
            <div class="modal-body">
                <form id="newWxItemForm" class="form-horizontal" role="form" data-toggle="validator">
                    <div class="form-group">
                        <label class="col-sm-2 control-label">标题</label>
                        <div class="col-sm-10">
                            <input type="text" class="form-control" name="title"
                                   data-bv-notempty="true"
                                   data-bv-notempty-message="标题不能为空"
                                   data-bv-stringlength="true"
                                   data-bv-stringlength-max="30"
                                   data-bv-stringlength-message="标题长度必须小于30个字符"/>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">描述</label>
                        <div class="col-sm-10">
                            <textarea type="text" class="form-control" cols="30" rows="3" name="description"
                                      data-bv-stringlength="true"
                                      data-bv-stringlength-max="50"
                                      data-bv-stringlength-message="描述长度必须小于50个字符"></textarea>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">内容URL</label>
                        <div class="col-sm-10">
                            <input type="url" class="form-control" name="url"
                                   data-bv-notempty="true"
                                   data-bv-notempty-message="内容URL不能为空"
                                   data-bv-stringlength="true"
                                   data-bv-stringlength-max="100"
                                   data-bv-stringlength-message="URL长度必须小于100个字符" placeholder="根据素材库中的URL填写"/>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">图片URL</label>
                        <div class="col-sm-10">
                            <input type="url" class="form-control" name="imgUrl"
                                   data-bv-notempty="true"
                                   data-bv-notempty-message="图片URL不能为空"
                                   data-bv-stringlength="true"
                                   data-bv-stringlength-max="200"
                                   data-bv-stringlength-message="URL长度必须小于200个字符"/>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">类别</label>
                        <div class="col-sm-10">
                            <div id = "category" >
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="tags_1" class="col-sm-2 control-label" >标签</label>
                        <div class="col-sm-10" >
                            <input id="tags_1" type="text" class="form-control"  />
                        </div>
                        <div class="col-sm-2"></div>
                        <div class="col-sm-10" >
                            <p class="mt8" style="margin-top: 8px;">
                                <span style="margin: 0;font-size: 12px;color: #999999;">最多添加3个标签</span>
                            </p>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <div class="form-group">
                            <button type="submit" class="btn btn-default" data-dismiss="modal">取消</button>
                            <button type="submit" id="saveBtn" class="btn btn-primary">保存</button>
                        </div>
                    </div>
                </form>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->


<div class="modal fade" id="editWxItemModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">编辑图文消息</h4>
            </div>
            <div class="modal-body">
                <form id="editWxItemForm" class="form-horizontal">
                    <input type="hidden" name="id" id="id">
                    <div class="form-group">
                        <label class="col-sm-2 control-label">标题</label>
                        <div class="col-sm-10">
                            <input type="text" class="form-control" name="title"
                                   data-bv-notempty="true"
                                   data-bv-notempty-message="标题不能为空"
                                   data-bv-stringlength="true"
                                   data-bv-stringlength-max="30"
                                   data-bv-stringlength-message="标题长度必须小于30个字符"/>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">描述</label>
                        <div class="col-sm-10">
                            <textarea type="text" class="form-control" cols="30" rows="3" name="description"
                                      data-bv-stringlength="true"
                                      data-bv-stringlength-max="50"
                                      data-bv-stringlength-message="描述长度必须小于50个字符"></textarea>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">内容URL</label>
                        <div class="col-sm-10">
                            <input type="text" class="form-control" name="url"
                                   data-bv-notempty="true"
                                   data-bv-notempty-message="内容URL不能为空"
                                   data-bv-stringlength="true"
                                   data-bv-stringlength-max="100"
                                   data-bv-stringlength-message="URL长度必须小于100个字符" placeholder="根据素材库中的URL填写"/>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">图片URL</label>
                        <div class="col-sm-10">
                            <input type="text" class="form-control" name="imgUrl"
                                   data-bv-notempty="true"
                                   data-bv-notempty-message="图片URL不能为空"
                                   data-bv-stringlength="true"
                                   data-bv-stringlength-max="200"
                                   data-bv-stringlength-message="URL长度必须小于200个字符"/>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">类别</label>
                        <div class="col-sm-10">
                            <div id = "categoryEdit">
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">标签</label>
                        <div class="col-sm-10" >
                            <input id="tags_2" type="text" class="form-control"  value=""/>
                        </div>
                        <div class="col-sm-2"></div>
                        <div class="col-sm-10" >
                            <p class="mt8" style="margin-top: 8px;">
                                <span style="margin: 0;font-size: 12px;color: #999999;">最多添加3个标签</span>
                            </p>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-default" data-dismiss="modal">取消</button>
                        <button type="submit" id="editBtn" class="btn btn-primary">保存</button>
                    </div>
                </form>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->



<!-- jQuery -->
<script src="/wechat-tools/js/jquery.min.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="/wechat-tools/js/bootstrap.min.js"></script>

<!-- Metis Menu Plugin JavaScript -->
<script src="/wechat-tools/js/metisMenu/metisMenu.min.js"></script>

<!-- Custom Theme JavaScript -->
<script src="/wechat-tools/js/sb-admin-2.js"></script>
<script src="/wechat-tools/js/datatables/media/js/jquery.dataTables.min.js"></script>
<script src="/wechat-tools/js/datatables/media/js/dataTables.bootstrap.min.js"></script>
<script src="/wechat-tools/js/jquery.tagsinput.min.js"></script>
<script src="/wechat-tools/js/bootstrap-dialog.min.js"></script>
<script src="/wechat-tools/js/bootstrapValidator.min.js"></script>
<script src="/wechat-tools/js/time.js"></script>
<script>
    $(document).ready(function(){
        $("#top").load("/wechat-tools/page/include/nav.html",function () {
            $($(".nav.nav-list.collapse")[1]).addClass("in");
        });
    });
    $(function() {
        var dt = $("#wxItemTable").DataTable({
            "processing": true, //loding效果
            "serverSide": true, //服务端处理
            "searchDelay": 1000,//搜索延迟
            "order": [[3, 'desc']],//默认排序方式
            "lengthMenu": [5, 10, 25, 50, 100],//每页显示数据条数菜单
            "ajax": {
                url: "/wechat-tools/backend/wxItem/items.json", //获取数据的URL
                type: "get" //获取数据的方式
            },
            "columns": [  //返回的JSON中的对象和列的对应关系
//                {"data":"id","name":"id"},
//                {"data":"itemId","name":"item_id"},
                {
                    "data": function (row) {
                        if (row.title.length > 15) {
                            return row.title.substring(0, 15) + "...";
                        } else {
                            return row.title;
                        }
                    }, "name": "title"
                },
                {
                    "data": function (row) {
                        if (row.description.length > 25) {
                            return row.description.substring(0, 25) + "...";
                        } else {
                            if (row.description.length == 0)
                                return "无";
                            return row.description;
                        }
                    }, "name": "description"
                },
                {
                    "data": function (row) {
                        if (row.category.name.length > 10) {
                            return row.category.name.substring(0, 10) + "...";
                        } else {
                            return row.category.name;
                        }
                    }, "name": "category"
                },
                {"data": function (row) {
                    return getDateDiff(row.createTime);
                }, "name": "create_time"},
                {"data": function (row) {
                    return getDateDiff(row.updateTime);
                }, "name": "update_time"},
                {
                    "data": function (row) {
                        return "<a href='" + row.url + "' target='view_window' class='previewLink' data-id='" + row.id + "'>预览</a> " +
                            "<a href='javascript:;' class='editLink' data-id='" + row.id + "'>编辑</a> <a href='javascript:;' class='delLink' data-id='" + row.id + "'>移除</a>";
                    }
                }
            ],
            "columnDefs": [ //具体列的定义
                {
                    "targets": [0,2],
                    "searchable": true
                },
                {
                    "targets": [3, 4],
                    "orderable": true
                },
                {
                    "targets": [1,2],
                    "orderable": false
                }
            ],
            "language": {
                "lengthMenu": "显示 _MENU_ 条记录",
                "search": "搜索:",
                "info": "从 _START_ 到 _END_ 共 _TOTAL_ 条记录",
                "processing": "加载中...",
                "zeroRecords": "暂无数据",
                "infoEmpty": "从 0 到 0 共 0 条记录",
                "infoFiltered": "(从 _MAX_ 条记录中读取)",
                "paginate": {
                    "first": "首页",
                    "last": "末页",
                    "next": "下一页",
                    "previous": "上一页"
                }
            }
        });
        //添加新图文消息
        var lock = true;
        $("#addNewWxItem").click(function() {
            $("#newWxItemForm")[0].reset();
            $('#newWxItemForm').bootstrapValidator('disableSubmitButtons', false);
            $.ajax({
                type: "post",
                url: "/wechat-tools/backend/wxItem/category.json",
                async:false,
                success: function (result) {
                    var code = result.code;
                    var data = result.data;
//                    console.log(data);
                    if (code == 0) {
                        var str = "";
                        for (var i in data) {
                            str += '<label class="radio-inline">'+
                                '<input type = "radio"  value = "'+data[i].id+'" name="category.id"' +
                                'data-bv-notempty="true"\n' +
                                'data-bv-notempty-message="类别不能为空" />' +data[i].name+
                                '</label>';
                        }
                        $("#category").html(str);
                        $('#newWxItemForm').bootstrapValidator('addField', 'category.id', {
                            validators: {
                                notEmpty: {
                                    message: '类别不能为空'
                                }
                            }
                        });
//                        $("#newWxItemForm").bootstrapValidator("addField",$("[name='category.id']"));
                    }
                }
            });
            $('#tags_1').importTags("");
            $('#tags_1').tagsInput({
                width:'auto',
                onChange: function(){
                    let len = $("#tags_1_tagsinput .tag").length;
                    tags_1_addTag.style.display = "";
                    if(len >= 3){
                        tags_1_addTag.style.display = "none";
                    }
                }
            });

            $("#newWxItemModal").modal('show');
        });
        function newFormValidator() {
            $('#newWxItemForm').bootstrapValidator().on('success.form.bv',function (e) {
                e.preventDefault();
                var title = ($("input[name = 'title']"))[0].value;
                console.log(title);
                var description = ($("textarea[name = 'description']"))[0].value;
                console.log(description);
                var url = ($("input[name = 'url']"))[0].value;
                console.log(url);
                var imgUrl = ($("input[name = 'imgUrl']"))[0].value;
                console.log(imgUrl);
                var category = {};
                category.id = parseInt(($("#category input:radio:checked"))[0].value);
                console.log(category.id);
                var spanTags = $(".tag").children("span");
                console.log(spanTags.length);
                var tags = new Array();
                for(i = 0;i<spanTags.length;i++){
                    console.log($.trim($(spanTags[i]).text().substring(0,10)));
                    tags.push({name:$.trim($(spanTags[i]).text().substring(0,10))});
                }
                if(!lock){// 2.判断该锁是否打开，如果是关闭的，则直接返回
                    return false;
                }
                lock = false ; //3.进来后，立马把锁锁住
//            $("#newWxItemForm").serialize()
                $.ajax({
                    url: "/wechat-tools/backend/wxItem/new",
                    type: "POST",
                    async:true,
                    dataType: "json",
                    contentType: "application/json;charset=UTF-8",
                    // 向后端传递的数据
                    data: JSON.stringify({
                        "title":title,
                        "description":description,
                        "url":url,
                        "imgUrl":imgUrl,
                        "category":category,
                        "tags":tags
                    }),
                    success: function (result) {
                        if("success" == result) {
                            $("#newWxItemForm")[0].reset();
                            $("#category").html("");
                            $("#newWxItemModal").modal("hide");
                            dt.ajax.reload();
                        }else if("duplicate" == result){
                            BootstrapDialog.alert({title:"提示",message:"该图文消息已添加，请勿重复添加!"});
                        }
                        else if("fail" == result){
                            BootstrapDialog.alert({title:"提示",message:"url不正确，请检查url!"});
                        }
                        lock = true;
                    },
                    error: () => {
                    console.log("err");
            }
            });
            })
        }
        $("#saveBtn").click(function(){
            //开启验证
            newFormValidator();

        });
        $("#newWxItemModal").on('hidden.bs.modal',function(e){
            //移除上次的校验配置
//            $("#newWxItemForm").data('bootstrapValidator').destroy();
            $('#newWxItemForm').data('bootstrapValidator',null);
            //重新添加校验
            newFormValidator();
//            $("#category").html("");
        });
        //删除用户
        $(document).delegate(".delLink", "click", function () {
            var id = $(this).attr("data-id");
            BootstrapDialog.confirm({
                title:"删除数据",
                message:"是否要移动到回收站?",
//                    btnOKClass: 'btn-warning',
                callback: function (res) {
                    if (res) {
                        $.post("/wechat-tools/backend/wxItem/del", {"id": id}).done(function (result) {
                            if (result.code == 0) {
                                dt.ajax.reload();
                            }else{
                                BootstrapDialog.alert({title:"提示",message:result.msg});
                                dt.ajax.reload();
                            }
                        }).fail(function () {
                            BootstrapDialog.alert({title:"提示",message:"删除出现异常"});
                            dt.ajax.reload();
                        });
                    }
                }
            });
        });
//                $.post("/wechat-tools/backend/wxItem/del", {"id": id}).done(function (result) {
//                    if (result.code == 0) {
//                        dt.ajax.reload();
//                    }else{
//                        BootstrapDialog.alert(result.msg);
//                    }
//                }).fail(function () {
//                    BootstrapDialog.alert("删除出现异常");
//                });

        //编辑用户
        $(document).delegate(".editLink", "click", function () {
            $("#editWxItemForm")[0].reset();
            $('#editWxItemForm').bootstrapValidator('disableSubmitButtons', false);
            $.ajax({
                type: "post",
                url: "/wechat-tools/backend/wxItem/category.json",
                async:false,
                success: function (result) {
                    var code = result.code;
                    var data = result.data;
//                    console.log(data);
                    if (code == 0) {
                        var str = "";
                        for (var i in data) {
                            str += '<label class="radio-inline">' +
                                '<input type = "radio"  value = "'+data[i].id+ '" name="category.id"' +
                                'data-bv-notempty="true"\n' +
                                'data-bv-notempty-message="类别不能为空" />' + data[i].name +
                                '</label>';
                        }
                        $("#categoryEdit").html(str);
                    }
                }
            });
            var id = $(this).attr("data-id");
            $.get("/wechat-tools/backend/wxItem/item.json", {"id": id}).done(function (result) {
                if (result.code == 0) {
                    var data = result.data;
                    $("input[name='id']").val(data.id);
                    $($("input[name='title']")[1]).val(data.title);
                    $($("textarea[name='description']")[1]).val(data.description);
                    $($("input[name='url']")[1]).val(data.url);
                    $($("input[name='imgUrl']")[1]).val(data.imgUrl);
                    console.log($("#categoryEdit input:radio"));
                    $("input:radio").each(function () {
                        if (data.category.id == $(this).val()) {
                            this.checked = true;
                        }
                    });
                    var str = '';
                    var tags = data.tags;
                    console.log(tags);
                    for (i = 0; i < tags.length; i++) {
                        if (i != tags.length - 1) {
                            str = str + tags[i].name + ',';
                        } else {
                            str = str + tags[i].name;
                        }
                    }
                    console.log(str);
                    $('#tags_2').importTags(str);
                    $('#tags_2').tagsInput({
                        width: 'auto',
                        onChange: function () {
                            let len = $("#tags_2_tagsinput .tag").length;
                            tags_2_addTag.style.display = "";
                            if (len >= 3) {
                                tags_2_addTag.style.display = "none";
                            }
                        }
                    });
                } else {
                    BootstrapDialog.alert({title:"提示",message:result.msg});
                }
            }).fail(function () {

            });
            $("#editWxItemModal").modal("show");
        });
        function editFormValidator() {
            $('#editWxItemForm').bootstrapValidator({
                message: 'This value is not valid',
                feedbackIcons: {
                    valid: 'glyphicon glyphicon-ok',
                    invalid: 'glyphicon glyphicon-remove',
                    validating: 'glyphicon glyphicon-refresh'
                },
                fields: {
                    title: {
                        validators: {
                            notEmpty: {        // 非空校验+提示信息
                                message: '标题不能为空'
                            },
                            stringLength: {     //输入　长度限制　　校验
                                max: 30,
                                message: '标题长度必须小于30个字符'
                            },
                        }
                    },
                    description: {
                        validators: {
                            stringLength: {     //输入　长度限制　　校验
                                max: 50,
                                message: '描述长度必须小于50个字符'
                            },
                        }
                    },
                    url: {
                        validators: {
                            notEmpty: {        // 非空校验+提示信息
                                message: 'URL不能为空'
                            },
                            stringLength: {     //输入　长度限制　　校验
                                max: 100,
                                message: 'URL长度必须小于100个字符'
                            },
                        }
                    },
                    imgUrl: {
                        validators: {
                            notEmpty: {        // 非空校验+提示信息
                                message: '图片URL不能为空'
                            },
                            stringLength: {     //输入　长度限制　　校验
                                max: 200,
                                message: '图片URL长度必须小于200个字符'
                            },
                        }
                    },
                    "category.id":{
                        validators: {
                            notEmpty: {
                                message: '类别不能为空'
                            }
                        }
                    }
                }
            }).on('submit',function (e) {
                e.preventDefault();
                var id = $("input[name='id']").val();
                var title = $($("input[name='title']")[1]).val();
                console.log(title);
                var description = $($("textarea[name='description']")[1]).val();
                console.log(description);
                var url = $($("input[name='url']")[1]).val();
                var imgUrl = $($("input[name='imgUrl']")[1]).val();
                var category = {};
                category.id = parseInt($("input:radio:checked").val());
                var spanTags = $(".tag").children("span");
                console.log(spanTags.length);
                var tags = new Array();
                for (i = 0; i < spanTags.length; i++) {
                    console.log($.trim($(spanTags[i]).text().substring(0, 10)));
                    tags.push({name: $.trim($(spanTags[i]).text().substring(0, 10))});
                }
                if(!lock){// 2.判断该锁是否打开，如果是关闭的，则直接返回
                    return false;
                }
                lock = false ; //3.进来后，立马把锁锁住
                $.ajax({
                    //            /wechat-tools/backend/wxItem/category.json
                    url: "/wechat-tools/backend/wxItem/edit",
                    type: "POST",
                    dataType: "json",
                    contentType: "application/json;charset=UTF-8",
                    // 向后端传递的数据
                    data: JSON.stringify({
                        "id":id,
                        "title":title,
                        "description":description,
                        "url":url,
                        "imgUrl":imgUrl,
                        "category":category,
                        "tags":tags
                    }),
                    success: function (result) {
                        if("success" == result) {
                            $("#editWxItemForm")[0].reset();
                            $('#categoryEdit').html("");
                            $("#editWxItemModal").modal("hide");
                            dt.ajax.reload();
                        }else if("duplicate" == result){
                            BootstrapDialog.alert({title:"提示",message:"该图文消息已添加，请勿重复添加!"});
                            dt.ajax.reload();
                        }
                        else if("fail" == result){
                            BootstrapDialog.alert({title:"提示",message:"url不正确，请检查url!"});
                            dt.ajax.reload();
                        }
                        lock = true;
                    },
                    error: () => {
                    console.log("err");
            }
            });
            });
        }
        $("#editBtn").click(function () {
            editFormValidator();
//            var bootstrapValidator = $("#editWxItemForm").data('bootstrapValidator');
//            bootstrapValidator.validate();
//            if(bootstrapValidator.isValid())
//                $("#editWxItemForm").submit();
//            else return;
        });
        $("#editWxItemModal").on('hidden.bs.modal',function(e){
            //移除上次的校验配置
//            $("#editWxItemForm").data('bootstrapValidator').destroy();
            $('#editWxItemForm').data('bootstrapValidator',null);
            //重新添加校验
//            editFormValidator();
        });

    });
</script>

</body>

</html>
